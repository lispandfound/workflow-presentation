<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Workflow</title>
<meta name="author" content="Jake Faulkner"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/white.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Workflow</h1><p class="subtitle">Creating a documented, tested, modular, best-in-class scientific workflow.</p>
<p class="date">Created: 2024-11-08 Fri 13:06</p>
</section>
<section>
<section id="slide-org1363084">
<h2 id="org1363084">Current Workflow: Challenges</h2>
<ul>
<li>Poor documentation</li>
<li>Brittle code with hacks</li>
<li>Insufficient testing, hard to validate outputs</li>
<li>Prone to breaking</li>
<li>Inflexible, one-size-fits-all approach</li>

</ul>
</section>
<section id="slide-org3120330">
<h3 id="org3120330">Key Problem: One Workflow to Rule Them All</h3>
<ul>
<li>Over-reliance on Software team for tweaks</li>
<li>High surface area for bugs</li>
<li>Includes unnecessary features, complicates maintenance</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgeee69b0">
<h2 id="orgeee69b0">New Workflow: Goals</h2>
<ul>
<li>Best-in-field scientific automation</li>
<li>High standards of Software Engineering</li>
<li>Comprehensive documentation</li>
<li>Rigorous testing to scientific standards</li>
<li>Adopts latest standards and languages</li>

</ul>
</section>
</section>
<section>
<section id="slide-org2c06b94">
<h2 id="org2c06b94">Documentation</h2>
<ul>
<li>High-level <a href="https://github.com/ucgmsim/workflow/wiki/Realisation-Proposal">rationale</a> and standards.</li>
<li>Complete documentation of <a href="https://ucgmsim.github.io/workflow/workflow/scripts/generate_stoch.html">workflow stages</a>.</li>
<li>Complete, researcher-friendly <a href="https://ucgmsim.github.io/workflow/workflow.html">source code documentation</a>.</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgb84922f">
<h2 id="orgb84922f">Testing</h2>
<ul>
<li>Hypothesis testing: automatic generation of 100's of test cases</li>
<li>Unit testing: <a href="https://github.com/ucgmsim/velocity_modelling/blob/cylc/tests/test_bounding_box.py#L105">95%+ code coverage</a>, immediate feedback</li>
<li>End-to-end workflow tests</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgd05aa3f">
<h2 id="orgd05aa3f">Modularity</h2>
<ul>
<li>Container-based: Reproducible, stable, latest scientific stack</li>
<li>Script-based: Components can be reused for custom workflows, customisable</li>

</ul>
</section>
</section>
<section>
<section id="slide-org1d5dffd">
<h2 id="org1d5dffd">Cylc: Workflow Engine</h2>
<ul>
<li>Advanced monitoring tools</li>
<li>NeSI support and community</li>
<li>Designed to be easy to create workflows</li>

</ul>
</section>
<section id="slide-orgd53aa34">
<h3 id="orgd53aa34">Shiny Monitoring Tools</h3>

<div id="org3a74722" class="figure">
<p><img src="cylc-ui-dash.png" alt="cylc-ui-dash.png" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-org5b55192">
<h2 id="org5b55192">Case Study: Cesar's Workflow</h2>
<div class="outline-text-2" id="text-org5b55192">
</div>
</section>
<section id="slide-org7d700a3">
<h3 id="org7d700a3">The Problem</h3>
<p>
Cesar wants to run a simulation, where each realisation has two SRFs, only one modified.
</p>
</section>
<section id="slide-org28eb0fc">
<h3 id="org28eb0fc">Old Workflow</h3>
<ol>
<li>Struggle with where the code relevant to his experiment is,</li>
<li>Struggle to change this code because it is not written to be read,</li>
<li>Fight the workflow manager because it expects to be running Cybershake.</li>

</ol>
</section>
<section id="slide-org70bf969">
<h3 id="org70bf969">New Workflow</h3>
<ol>
<li>Write his own SRF processor</li>
<li>Plan a new workflow using the workflow planning tool.</li>
<li>Deploy to NeSI, go home early</li>

</ol>
</section>
<section id="slide-orgd17bae0">
<h3 id="orgd17bae0">New Workflow</h3>
<ul>
<li>High-level, <b>searchable documentation</b> available</li>
<li>Scripts are reliable; <b>extensive testing</b> in place</li>
<li>Researchers can build and deploy their own Cylc workflow <b>without needing to understand our code</b>.</li>

</ul>
</section>
<section id="slide-orgfee73ed">
<h3 id="orgfee73ed">Notice</h3>
<ul>
<li>No environment management</li>
<li>No complicated task config</li>
<li>No slurm database locking</li>

</ul>
</section>
</section>
<section>
<section id="slide-org54418e5">
<h2 id="org54418e5">Demo: GCMT Simulations on Hypocentre</h2>

</section>
</section>
<section>
<section id="slide-org83ced6b">
<h2 id="org83ced6b">Errata</h2>
<ul>
<li>Industry standard scientific outputs (HDF5 for waveforms).</li>
<li>Near real-time simulations of GCMT solutions.</li>
<li>Fast adoption of the new RCC cluster.</li>
<li>Support for upcoming Genoa nodes (50% than NeSI Milan nodes, 3x faster than Maui).</li>
<li>Consolidated scientific defaults.</li>

</ul>
</section>
<section id="slide-orgf1dcbb2">
<h3 id="orgf1dcbb2">Roadmap</h3>
<ul>
<li><b>WIP</b> Simple archiving solution with automatic Dropbox upload.</li>
<li><b>WIP</b> Core hour usage monitoring.</li>
<li><b>WIP</b> New advanced visualisation tools.</li>
<li><b>WIP</b> Automated quality assurance.</li>
<li><b>WIP</b> Documentation automation.</li>
<li><b>WIP</b> Multi-segment simulations.</li>

</ul>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]

});

</script>
</body>
</html>
